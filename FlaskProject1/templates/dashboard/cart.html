{% extends "base.html" %}

{% block title %}–ö–æ–ª–∏—á–∫–∞{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <h1 class="welcome-title">–í–∞—à–∞—Ç–∞ <span class="username">–ö–æ–ª–∏—á–∫–∞</span></h1>
        <p class="welcome-subtitle">–î–æ–±—Ä–µ –¥–æ—à—ä–ª, {{ current_user.username }}! –¢—É–∫ –º–æ–∂–µ—à –¥–∞ –ø—Ä–µ–≥–ª–µ–¥–∞—à –∏ —É–ø—Ä–∞–≤–ª—è–≤–∞—à –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ –≤ –∫–æ–ª–∏—á–∫–∞—Ç–∞ —Å–∏.</p>
    </div>

    <div class="divider"></div>

    <div class="cart-content">
        <div class="cart-items">
            <h2 class="section-title">–ü—Ä–æ–¥—É–∫—Ç–∏ –≤ –∫–æ–ª–∏—á–∫–∞—Ç–∞</h2>
            
            {% if cart_items %}
                {% set products = {
                    'nike_air_force': {'name': 'Nike Air Force 1', 'category': '–°–ø–æ—Ä—Ç–Ω–∏', 'price': 199.99, 'image': 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=200&h=200&fit=crop'},
                    'nike_jordan': {'name': 'Air Jordan 1', 'category': '–°–ø–æ—Ä—Ç–Ω–∏', 'price': 299.99, 'image': 'https://images.unsplash.com/photo-1600269452121-4f2416e55c28?w=200&h=200&fit=crop'},
                    'adidas_ultraboost': {'name': 'Adidas Ultraboost', 'category': '–°–ø–æ—Ä—Ç–Ω–∏', 'price': 229.99, 'image': 'https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=200&h=200&fit=crop'},
                    'adidas_superstar': {'name': 'Adidas Superstar', 'category': '–í—Å–µ–∫–∏–¥–Ω–µ–≤–Ω–∏', 'price': 179.99, 'image': 'https://images.unsplash.com/photo-1587563871167-1ee9c731aefb?w=200&h=200&fit=crop'},
                    'puma_rsx': {'name': 'Puma RS-X', 'category': '–°–ø–æ—Ä—Ç–Ω–∏', 'price': 159.99, 'image': 'https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=200&h=200&fit=crop'},
                    'new_balance_574': {'name': 'New Balance 574', 'category': '–í—Å–µ–∫–∏–¥–Ω–µ–≤–Ω–∏', 'price': 169.99, 'image': 'https://images.unsplash.com/photo-1600185365483-26d7a4cc7519?w=200&h=200&fit=crop'},
                    'vans_old_skool': {'name': 'Vans Old Skool', 'category': '–í—Å–µ–∫–∏–¥–Ω–µ–≤–Ω–∏', 'price': 129.99, 'image': 'https://images.unsplash.com/photo-1549298916-b41d501d3772?w=200&h=200&fit=crop'},
                    'converse_chuck': {'name': 'Converse Chuck 70', 'category': '–í—Å–µ–∫–∏–¥–Ω–µ–≤–Ω–∏', 'price': 149.99, 'image': 'https://images.unsplash.com/photo-1449505278894-297fdb3edbc1?w=200&h=200&fit=crop'},
                    'elegant_dress': {'name': 'Clarks Dress Shoes', 'category': '–ï–ª–µ–≥–∞–Ω—Ç–Ω–∏', 'price': 279.99, 'image': 'https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?w=200&h=200&fit=crop'}
                } %}
                
                {% set total_price = 0 %}
                {% for product_id in cart_items %}
                    {% if product_id in products %}
                        {% set product = products[product_id] %}
                        {% set total_price = total_price + product.price %}
                        <div class="cart-item">
                            <div class="item-image">
                                <img src="{{ product.image }}" alt="{{ product.name }}">
                            </div>
                            <div class="item-info">
                                <h3 class="item-name">{{ product.name }}</h3>
                                <span class="item-category">{{ product.category }}</span>
                                <div class="item-price">{{ "%.2f"|format(product.price) }} –ª–≤</div>
                            </div>
                            <div class="item-actions">
                                <form action="{{ url_for('dashboard.remove_from_cart') }}" method="POST" style="display: inline;">
                                    <input type="hidden" name="product_id" value="{{ product_id }}">
                                    <button type="submit" class="btn-remove">–ü—Ä–µ–º–∞—Ö–Ω–∏</button>
                                </form>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            {% else %}
                <div class="empty-cart">
                    <div class="empty-cart-icon">üõí</div>
                    <h3>–ö–æ–ª–∏—á–∫–∞—Ç–∞ –≤–∏ –µ –ø—Ä–∞–∑–Ω–∞</h3>
                    <p>–í—Å–µ –æ—â–µ –Ω—è–º–∞—Ç–µ –¥–æ–±–∞–≤–µ–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –≤ –∫–æ–ª–∏—á–∫–∞—Ç–∞.</p>
                    <a href="{{ url_for('dashboard.dashboard') }}" class="continue-shopping">–ü—Ä–æ–¥—ä–ª–∂–∏ —Å –ø–∞–∑–∞—Ä—É–≤–∞–Ω–µ—Ç–æ</a>
                </div>
            {% endif %}
        </div>

        {% if cart_items %}
        <div class="cart-summary">
            <h2 class="section-title">–†–µ–∑—é–º–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∞—Ç–∞</h2>
            
            <div class="summary-item">
                <span class="summary-label">–ë—Ä–æ–π –ø—Ä–æ–¥—É–∫—Ç–∏:</span>
                <span class="summary-value">{{ cart_items|length }}</span>
            </div>
            
            <div class="summary-item">
                <span class="summary-label">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                <span class="summary-value">5.00 –ª–≤</span>
            </div>
            
            <div class="summary-item">
                <span class="summary-label">–û–±—â–æ:</span>
                <span class="summary-value total-price">{{ "%.2f"|format(total_price + 5) }} –ª–≤</span>
            </div>

            <button class="checkout-btn" onclick="checkout()">
                –ü—Ä–æ–¥—ä–ª–∂–∏ –∫—ä–º –ø–ª–∞—â–∞–Ω–µ
            </button>

            <p style="text-align: center; margin-top: 1rem; color: #6b7280; font-size: 0.8rem;">
                * –¢–æ–≤–∞ –µ –¥–µ–º–æ –≤–µ—Ä—Å–∏—è. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç—Ç–∞ –∑–∞ –ø–ª–∞—â–∞–Ω–µ –Ω–µ –µ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞–Ω–∞.
            </p>
        </div>
        {% endif %}
    </div>
</div>

<style>
/* –î–æ–±–∞–≤–∏ —Ç—É–∫ –≤—Å–∏—á–∫–∏—Ç–µ —Å—Ç–∏–ª–æ–≤–µ –æ—Ç –ø—Ä–µ–¥–∏—à–Ω–∞—Ç–∞ –≤–µ—Ä—Å–∏—è */
.cart-content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 2rem;
}

.cart-items, .cart-summary {
    background: #1f2937;
    border-radius: 10px;
    padding: 1.5rem;
    border: 1px solid #374151;
}

.cart-item {
    display: flex;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid #374151;
    gap: 1rem;
}

.item-image {
    width: 80px;
    height: 80px;
    border-radius: 8px;
    overflow: hidden;
}

.item-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.btn-remove {
    background: #ef4444;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
}

.checkout-btn {
    width: 100%;
    background: linear-gradient(135deg, #0ea5e9, #10b981);
    color: white;
    border: none;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 1rem;
}

.empty-cart {
    text-align: center;
    padding: 3rem;
    color: #6b7280;
}
</style>

<script>
function checkout() {
    alert('–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç—Ç–∞ –∑–∞ –ø–ª–∞—â–∞–Ω–µ –≤—Å–µ –æ—â–µ –Ω–µ –µ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞–Ω–∞. –¢–æ–≤–∞ –µ –¥–µ–º–æ –≤–µ—Ä—Å–∏—è.');
}
</script>
{% endblock %}